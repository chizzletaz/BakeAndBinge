{% extends "base.html" %}
{% block content %}

<div class="container">
    <h2>{{ username }}</h2>

    <a class="btn-floating pink accent-2" href="{{ url_for('add_recipe') }}"><i class="fas fa-plus"></i></a>
    <p>Add new recipe</p>

   
    <div class="row">
        {% for recipe in recipes %}
            <div class="col s12 m6 l4">
                <div class="card z-depth-2 hover">
                    <div class="card-image">
                        <img src="{{ recipe.recipe_image }}" alt="{{ recipe.recipe_title }}">
                        <p>By: {{ recipe.created_by | capitalize }}</p>
                    </div>
                    <div class="indications">
                        <ul class="col s6 collection">
                            <li class="collection-item">
                            <p><i class="far fa-clock"></i> {{ recipe.total_time }}</p></li>
                          </ul>
                          <ul class="col s6 collection">
                            <li class="collection-item">
                                <p><i class="fas fa-user-friends"></i> {{ recipe.servings }}</p></li>
                          </ul>
                    </div>
                    <div class="card-content center-align">
                        <h5><strong>{{ recipe.recipe_title | capitalize }}</strong></h5>
                    </div>
                    <div class="card-action center-align">
                        <a class="btn pink lighten-3" href="{{ url_for('recipe', recipe_id=recipe._id) }}">Go to
                            recipe</a>
                    </div>
                    {% if session.user|lower == recipe.created_by|lower %}
                    <div class="card-action">
                        <a class="btn blue-grey lighten-4 black-text gb"
                            href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}">Edit Recipe</a>
                        <!-- Modal Trigger for confirmation -->
                        <a class="btn blue-grey lighten-4 black-text right rb modal-trigger" href="#modal1">Delete
                            Recipe</a>
                    </div>
                    <!-- Modal Structure for confirmation-->
                    <div id="modal1" class="modal">
                        <div class="modal-content center-align">
                            <p>Are you sure you want to delete this recipe?</p>
                        </div>
                        <div class="modal-footer">
                            <a href="{{ url_for('recipe', recipe_id=recipe._id) }}" class="modal-close waves-effect waves-green btn-flat left">No</a>
                            <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="modal-close waves-effect waves-green btn-flat">Yes</a>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>

</div>
{% endblock %}